<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Insurance Backend Test</title>
</head>
<body>
    <h1>Insurance Backend Test</h1>

    <h2>Quote Test</h2>
    <form id="quoteForm">
        User ID: <input type="number" id="userId" value="1"><br>
        Product ID: <input type="number" id="productId" value="2"><br>
        Duration: <input type="number" id="duration" value="12"><br>
        Premium: <input type="number" id="premium" value="5000"><br>
        <button type="submit">Get Quote</button>
    </form>

    <pre id="result"></pre>

    <script>
        const form = document.getElementById("quoteForm");
        const result = document.getElementById("result");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            const payload = {
                userId: parseInt(document.getElementById("userId").value),
                productId: parseInt(document.getElementById("productId").value),
                duration: parseInt(document.getElementById("duration").value),
                premium: parseInt(document.getElementById("premium").value)
            };

            try {
                const response = await fetch("http://localhost:8080/api/policies/quote", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) throw new Error(`Error: ${response.status}`);
                const data = await response.json();
                result.textContent = JSON.stringify(data, null, 2);
            } catch (err) {
                result.textContent = err;
            }
        });
    </script>
</body>
</html>